
<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: arial, sans-serif;
    }
  </style>
</head>
<body>
  <h1>Upload Audio Here</h1>
  <form id="audioUpload">
    <input type="file" name="file" accept="audio/*" required/>
    <button type="submit">Transcribe</button>
  </form>
  <p id="transcript">Transcript shows here.</p>
</body>
<script>
  const audioUpload = document.getElementById("audioUpload");
  const transcript = document.getElementById("transcript");
  audioUpload.addEventListener("submit", async (a) => {
    a.preventDefault();
    transcript.textContent = "Transcribing...";
    const audioData = new FormData(audioUpload);
    console.log("Printing form data:");
    for(let [key, value] of audioData.entries()){
      console.log(key, value);
    }
    try {
      const res = await fetch("https://audio-file-transcriber-python.onrender.com/transcribe", {
        method: "POST",
        body: audioData
      });
      if(!res.ok){
        throw new Error(`HTTP error ${res.status}`);
      }
      const trnscrData = await res.json();
      if(!trnscrData.text){
        throw new Error("No transcription recieved");
      }
      transcript.textContent = trnscrData.text;
    }
    catch(err){
      console.error("Error during transcription: ", err);
      transcript.textContent = "Error.";
    }
  });
</script>
</html>
